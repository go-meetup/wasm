<html>
<head>
    <meta charset="utf-8"/>
    <script src="wasm_exec.js"></script>
    <script>
        const go = new Go();
        WebAssembly.instantiateStreaming(fetch("hello.wasm"), go.importObject).then((result) => {
            go.run(result.instance);
        });
        function drawButton(label,alt) {
            var btnText = label + alt.toString();
            var btn = document.getElementById(label);
            if (btn !== null){
                btn.firstChild.nodeValue= btnText;
                return;
            }

            btn = document.createElement("button");
            btn.id = label;
            var t = document.createTextNode(btnText);
            btn.appendChild(t);
            document.body.appendChild(btn);
        }
        function updateState() {
            document.getElementById("replyInp").value=helloObject.timeCreated;
            var elems = helloObject["elements"];
            Object.keys(elems).forEach(function(key) {    //todo: validate
                if (key !== "createdByGo" && key!=="creator"){
                    drawButton(key,elems[key]);
                }
            });
        }
    </script>
</head>
<body>

<button type="button" onclick="console.log(helloAgain('Jhon','Paul','George','Ringo'))"><span>Hello Again</span>
</button>
<input type="text" id="replyInp"/>
<div id="replyDiv"/>


</body>
</html>
